function AjaxClient(){}function Igniter(e){this.selector=e,AjaxClient.call(this)}AjaxClient.prototype.async=!0,AjaxClient.prototype.timeout=3e3,AjaxClient.prototype.debug=!1,AjaxClient.prototype.get=function(e,t){var n=this,r=new XMLHttpRequest;r.timeout=this.timeout,r.open("get",e,this.async),r.onload=function(){r.readyState===r.DONE&&200===r.status&&(n.debug&&console.log(r.responseText),t(r.responseText))},r.send()},AjaxClient.prototype.getJSON=function(e,t){var n=this,r=new XMLHttpRequest;r.timeout=this.timeout,r.open("get",e,this.async),r.onload=function(){r.readyState===r.DONE&&200===r.status&&(n.debug&&console.log(r.responseText),t(JSON.parse(r.responseText)))},r.send()},AjaxClient.prototype.post=function(e,t,n){var r=this,o=new XMLHttpRequest;o.timeout=this.timeout,o.open("post",e,this.async),o.onload=function(){o.readyState===o.DONE&&200===o.status&&(r.debug&&console.log(o.responseText),n(JSON.parse(o.responseText)))},o.send(t)},AjaxClient.prototype.setDebug=function(e){AjaxClient.prototype.debug=e},Igniter.prototype=Object.create(AjaxClient.prototype),Igniter.prototype.constructor=Igniter,Igniter.prototype.hide=function(){var e=this.selector;if(e.match(/^#/))document.querySelector(e).style.display="none";else for(var t=document.querySelectorAll(e),n=0;n<t.length;n++)t[n].style.display="none"},Igniter.prototype.show=function(){var e=this.selector;if(e.match(/^#/))document.querySelector(e).style.display="inline";else for(var t=document.querySelectorAll(e),n=0;n<t.length;n++)t[n].style.display="inline"},Igniter.prototype.toggle=function(){var e=this.selector;if(e.match(/^#/)){var t=document.querySelector(e);"none"==t.style.display?t.style.display="inline":t.style.display="none"}else for(var n=document.querySelectorAll(e),r=0;r<n.length;r++)"none"==n[r].style.display?n[r].style.display="inline":n[r].style.display="none"},Igniter.prototype.css=function(e,t){var n=this.selector;if(n.match(/^#/))document.querySelector(n).style.setProperty(e,t);else for(var r=document.querySelectorAll(n),o=0;o<r.length;o++)r[o].style.setProperty(e,t)},Igniter.prototype.attr=function(e,t){var n=this.selector;if(n.match(/^#/))document.querySelector(n).setAttribute(e,t);else for(var r=document.querySelectorAll(n),o=0;o<r.length;o++)r[o].setAttribute(e,t)},Igniter.prototype.html=function(e){var t=this.selector;if(t.match(/^#/))document.querySelector(t).innerHTML=e;else for(var n=document.querySelectorAll(t),r=0;r<n.length;r++)n[r].innerHTML=e},Igniter.prototype.append=function(e){var t=this.selector;if(t.match(/^#/))document.querySelector(t).innerHTML+=e;else for(var n=document.querySelectorAll(t),r=0;r<n.length;r++)n[r].innerHTML+=e},Igniter.prototype.click=function(e){var t=this.selector;if(t.match(/^#/))document.querySelector(t).addEventListener("click",e);else for(var n=document.querySelectorAll(t),r=0;r<n.length;r++)n[r].addEventListener("click",e)},Igniter.prototype.listen=function(e,t){var n=this.selector;if(n.match(/^#/))document.querySelector(n).addEventListener(e,t);else for(var r=document.querySelectorAll(n),o=0;o<r.length;o++)r[o].addEventListener(e,t)},Igniter.prototype.renderTemplate=function(e,t){var n=document.getElementById(e).innerHTML;for(var r in t){var o=new RegExp("{{"+r+"}}","g");n=n.replace(o,t[r])}return n},Igniter.prototype.dataBind=function(e){var t=this.selector;(t=t?document.querySelector(t):document)||(t=document);for(var n in e)if("checkbox"===t.querySelector("#"+n).type){var r=t.querySelector("#"+n);r.value==e[n]&&(r.checked=!0)}else t.querySelector("#"+n).value=e[n]},Igniter.prototype.openWindow=function(e,t,n){var r=window.open(e,"newWin","resizable=yes ,scrollbars=no,status=0,width="+t+",height="+n);r.focus(),r.opener||(r.opener="main")},Igniter.prototype.serialize=function(e){return"?"+Object.keys(e).reduce(function(t,n){return t.push(n+"="+encodeURIComponent(e[n])),t},[]).join("&")},Igniter.prototype.clearForm=function(){var e=this.selector,t=document.querySelector(e);for(i=0;i<t.elements.length;i++)switch(field_type=t.elements[i].type.toLowerCase(),field_type){case"hidden":break;case"text":case"password":case"textarea":t.elements[i].value="";break;case"radio":case"checkbox":t.elements[i].checked&&(t.elements[i].checked=!1);break;case"select-one":case"select-multi":t.elements[i].selectedIndex=-1}},Igniter.prototype.ajaxSubmit=function(e){var t,n=this.selector;if(void 0!==(t="string"==typeof n?document.querySelector(n):n).action){var r=new XMLHttpRequest;if(r.onload=function(){e(r.responseText)},"post"===t.method.toLowerCase())r.open("post",t.action),r.send(new FormData(t));else{for(var o,i,s,l="",c=0;c<t.elements.length;c++)if((o=t.elements[c]).hasAttribute("name"))if("FILE"===(i="INPUT"===o.nodeName.toUpperCase()?o.getAttribute("type").toUpperCase():"TEXT"))for(s=0;s<o.files.length;l+="&"+escape(o.name)+"="+escape(o.files[s++].name));else("RADIO"!==i&&"CHECKBOX"!==i||o.checked)&&(l+="&"+escape(o.name)+"="+escape(o.value));r.open("get",t.action.replace(/(?:\?.*)?$/,l.replace(/^&/,"?")),!0),r.send(null)}return!1}},Igniter.prototype.validateForm=function(e){for(var t=this.selector,n=document.querySelector(t),r="",o=0;o<n.elements.length;o++)n.elements[o].dataset.required&&""===n.elements[o].value&&(n.elements[o].dataset.errorMessage?r+=n.elements[o].dataset.errorMessage+"\n":r+="The required field "+n.elements[o].name+" was left empty\n");var i={};return i.errorMsg=r,i.valid=!r,e?(e(i),i.valid):(i.valid||alert(r),i.valid)};var $i=function(e){return new Igniter(e)};$i.get=function(e,t){return $i().get(e,t)},$i.getJSON=function(e,t){return $i().getJSON(e,t)},$i.post=function(e,t,n){return $i().post(e,t,n)},$i.openWindow=function(e,t,n){return $i().openWindow(e,t,n)},$i.serialize=function(e){return $i().serialize(e)},$i.setDebug=function(e){return $i().setDebug(e)};
